var HT = (function () {
  'use strict';

  var me = {},
      hitEvent,
      hotInstances = {};

    var advancedData = [
        ["Afghanistan","30,552","1000s","2013","2.44%","27,708","24,019","11,215"  ],
        ["Albania","2,774","1000s","2013","-1.00%","2,884","3,015","3,228"  ],
        ["Algeria","39,208","1000s","2013","1.89%","36,383","33,461","25,577"  ],
        ["Angola","21,472","1000s","2013","3.13%","18,927","15,977","10,051"  ],
        ["Antigua and Barbuda","90","1000s","2013","1.03%","86","82","62"  ],
        ["Argentina","41,446","1000s","2013","0.87%","40,024","38,309","32,17"  ],
        ["Armenia","2,977","1000s","2013","0.25%","2,968","3,026","3,543"  ],
        ["Australia","23,131","1000s","2013","1.79%","21,692","20,127","16,814"  ],
        ["Austria","8,474","1000s","2013","0.52%","8,365","8,172","7,62"  ],
        ["Azerbaijan","9,296","1000s","2012","1.34%","8,763","8,234","6,994"  ],
        ["Bahrain","1,332","1000s","2013","1.09%","1,192","821","481"  ],
        ["Bangladesh","156,595","1000s","2013","1.23%","149,503","141,235","104,779"  ],
        ["Barbados","285","1000s","2013","0.50%","279","272","258"  ],
        ["Belarus","9,464","1000s","2012","-0.10%","9,528","9,797","10,14"  ],
        ["Belgium","11,195","1000s","2013","0.60%","10,796","10,421","9,938"  ],
        ["Belize","324","1000s","2012","2.46%","294","258","179"  ],
        ["Benin","10,323","1000s","2013","2.71%","9,241","7,923","4,836"  ],
        ["Bhutan","754","1000s","2013","1.63%","705","634","530"  ],
        ["Bolivia","10,671","1000s","2013","1.67%","9,993","9,188","6,636"  ],
        ["Bosnia and Herzegovina","3,829","1000s","2013","-0.12%","3,853","3,887","4,585"  ],
        ["Botswana","2,021","1000s","2013","0.86%","1,952","1,855","1,343"  ],
        ["Brazil","200,362","1000s","2013","0.86%","193,491","184,01","147,079"  ],
        ["Brunei","418","1000s","2013","1.35%","394","361","250"  ],
        ["Bulgaria","7,265","1000s","2013","-0.56%","7,444","7,781","8,877"  ],
        ["Burkina Faso","16,935","1000s","2013","2.88%","15,095","13,034","8,58"  ],
        ["Burundi","10,163","1000s","2013","3.18%","8,927","7,511","5,449"  ],
        ["Cambodia","15,135","1000s","2013","1.82%","14,144","13,149","8,769"  ],
        ["Cameroon","22,254","1000s","2013","2.55%","20,104","17,675","11,717"  ],
        ["Canada","35,158","1000s","2013","1.16%","33,629","31,995","27,379"  ],
        ["Cape Verde","499","1000s","2013","0.91%","486","474","346"  ],
        ["Central African Republic","4,616","1000s","2013","2.02%","4,266","3,894","2,852"  ],
        ["Chad","12,825","1000s","2013","3.03%","11,371","9,665","5,765"  ],
        ["Chile","17,62","1000s","2013","0.89%","16,992","16,168","12,981"  ],
        ["China","1,357,380","1000s","2013","0.49%","1,331,260","1,296,075","1,118,650"  ],
        ["Colombia","48,321","1000s","2013","1.29%","45,803","42,528","32,657"  ],
        ["Comoros","718","1000s","2012","2.47%","649","570","393"  ],
        ["Congo","67,514","1000s","2013","2.75%","60,486","52,487","33,728"  ],
        ["Congo-Brazzaville","4,448","1000s","2013","2.55%","3,995","3,449","2,32"  ],
        ["Costa Rica","4,872","1000s","2013","1.39%","4,601","4,246","3,001"  ],
        ["Croatia","4,253","1000s","2013","-0.35%","4,429","4,439","4,767"  ],
        ["Cuba","11,266","1000s","2013","-0.05%","11,289","11,273","10,504"  ],
        ["Cyprus","1,141","1000s","2013","1.08%","1,091","1,016","751"  ],
        ["Czech Republic","10,521","1000s","2013","0.10%","10,444","10,197","10,361"  ],
        ["Denmark","5,614","1000s","2013","0.40%","5,523","5,405","5,133"  ],
        ["Djibouti","873","1000s","2013","1.54%","822","766","560"  ],
        ["Dominica","72","1000s","2013","0.45%","71","70","71"  ],
        ["Dominican Republic","10,404","1000s","2013","1.24%","9,884","9,207","7,099"  ],
        ["Ecuador","15,492","1000s","2012","1.61%","14,512","13,28","9,651"  ],
        ["Egypt","82,056","1000s","2013","1.65%","76,775","70,591","55,207"  ],
        ["El Salvador","6,34","1000s","2013","0.68%","6,183","6,05","5,269"  ],
        ["Equatorial Guinea","757","1000s","2013","2.81%","677","586","362"  ],
        ["Eritrea","6,333","1000s","2013","3.30%","5,558","4,666","3,21"  ],
        ["Estonia","1,325","1000s","2013","-0.03%","1,335","1,363","1,568"  ],
        ["Ethiopia","94,101","1000s","2013","2.59%","84,838","74,066","46,435"  ],
        ["Fiji","881","1000s","2013","0.72%","852","819","724"  ],
        ["Finland","5,439","1000s","2013","0.47%","5,339","5,228","4,964"  ],
        ["France","66,028","1000s","2013","0.54%","64,703","62,702","58,114"  ],
        ["Gabon","1,672","1000s","2013","2.40%","1,519","1,347","921"  ],
        ["Gambia","1,849","1000s","2013","3.24%","1,628","1,392","881"  ],
        ["Georgia","4,477","1000s","2013","-0.31%","4,411","4,318","4,803"  ],
        ["Germany","80,622","1000s","2013","0.24%","81,902","82,516","78,751"  ],
        ["Ghana","25,905","1000s","2013","2.12%","23,692","20,836","14,233"  ],
        ["Greece","11,032","1000s","2013","-0.54%","11,187","11,056","10,089"  ],
        ["Grenada","106","1000s","2013","0.39%","104","103","97"  ],
        ["Guatemala","15,468","1000s","2013","2.56%","13,989","12,368","8,688"  ],
        ["Guinea","11,745","1000s","2013","2.57%","10,593","9,38","5,751"  ],
        ["Guinea-Bissau","1,704","1000s","2013","2.45%","1,551","1,391","995"  ],
        ["Guyana","800","1000s","2013","0.53%","781","757","728"  ],
        ["Haiti","10,317","1000s","2013","1.41%","9,765","9,13","6,965"  ],
        ["Honduras","8,098","1000s","2013","2.04%","7,47","6,762","4,767"  ],
        ["Hong Kong","7,188","1000s","2013","0.46%","6,973","6,784","5,686"  ],
        ["Hungary","9,897","1000s","2013","-0.23%","10,023","10,107","10,482"  ],
        ["Iceland","323","1000s","2013","0.71%","318","292","253"  ],
        ["India","1,252,140","1000s","2013","1.25%","1,190,138","1,110,626","851,375"  ],
        ["Indonesia","249,866","1000s","2013","1.22%","237,487","221,294","175,461"  ],
        ["Iran","77,447","1000s","2013","1.34%","73,543","69,342","54,938"  ],
        ["Iraq","33,417","1000s","2013","2.58%","30,163","26,674","17,074"  ],
        ["Ireland","4,595","1000s","2013","0.18%","4,535","4,07","3,511"  ],
        ["Israel","8,059","1000s","2013","1.88%","7,486","6,809","4,518"  ],
        ["Italy","59,831","1000s","2013","0.49%","59,095","57,685","56,672"  ],
        ["Ivory Coast","20,316","1000s","2013","2.40%","18,601","17,144","11,711"  ],
        ["Jamaica","2,715","1000s","2013","0.27%","2,681","2,634","2,375"  ],
        ["Japan","127,339","1000s","2013","-0.17%","127,558","127,761","123,116"  ],
        ["Jordan","6,459","1000s","2013","2.23%","5,915","5,29","3,056"  ],
        ["Kazakhstan","17,038","1000s","2013","1.47%","16,093","15,013","16,25"  ],
        ["Kenya","44,354","1000s","2013","2.72%","39,825","34,835","22,667"  ],
        ["Kiribati","102","1000s","2013","1.55%","96","89","69"  ],
        ["Kosovo","1,824","1000s","2013","0.93%","1,761","1,705","1,827"  ],
        ["Kuwait","3,369","1000s","2013","3.63%","2,85","2,196","2,059"  ],
        ["Kyrgyzstan","5,72","1000s","2013","2.00%","5,383","5,105","4,308"  ],
        ["Laos","6,77","1000s","2013","1.86%","6,268","5,699","4,123"  ],
        ["Latvia","2,013","1000s","2013","-1.03%","2,142","2,263","2,667"  ],
        ["Lebanon","4,467","1000s","2013","0.96%","4,247","3,854","2,677"  ],
        ["Lesotho","2,074","1000s","2013","1.12%","1,99","1,912","1,57"  ],
        ["Liberia","4,294","1000s","2013","2.47%","3,821","3,185","2,137"  ],
        ["Libya","6,202","1000s","2013","0.76%","5,964","5,507","4,161"  ],
        ["Lithuania","2,956","1000s","2013","-1.06%","3,163","3,377","3,684"  ],
        ["Luxembourg","543","1000s","2013","2.31%","498","458","377"  ],
        ["Macedonia","2,107","1000s","2013","0.08%","2,101","2,086","2,006"  ],
        ["Madagascar","22,925","1000s","2013","2.83%","20,496","17,763","11,206"  ],
        ["Malawi","16,363","1000s","2013","2.87%","14,573","12,569","9,105"  ],
        ["Malaysia","29,717","1000s","2013","1.63%","27,79","25,365","17,707"  ],
        ["Maldives","345","1000s","2013","1.94%","320","293","210"  ],
        ["Mali","15,302","1000s","2013","3.02%","13,559","11,573","7,826"  ],
        ["Malta","423","1000s","2013","0.91%","412","401","351"  ],
        ["Mauritania","3,89","1000s","2013","2.47%","3,516","3,055","1,969"  ],
        ["Mauritius","1,296","1000s","2013","0.40%","1,275","1,233","1,049"  ],
        ["Mexico","122,332","1000s","2013","1.23%","116,423","109,382","84,327"  ],
        ["Moldova","3,559","1000s","2013","-0.01%","3,566","3,604","3,681"  ],
        ["Mongolia","2,839","1000s","2013","1.52%","2,672","2,496","2,141"  ],
        ["Montenegro","621","1000s","2013","0.05%","619","615","612"  ],
        ["Morocco","33,008","1000s","2013","1.50%","31,277","29,856","24,212"  ],
        ["Mozambique","25,834","1000s","2013","2.50%","23,361","20,439","13,395"  ],
        ["Myanmar","53,259","1000s","2013","0.87%","51,54","49,875","41,445"  ],
        ["Namibia","2,303","1000s","2013","1.94%","2,143","2,003","1,361"  ],
        ["Nepal","27,797","1000s","2013","1.18%","26,545","24,922","17,68"  ],
        ["Netherlands","16,804","1000s","2013","0.29%","16,53","16,282","14,849"  ],
        ["New Zealand","4,471","1000s","2013","0.85%","4,316","4,088","3,299"  ],
        ["Nicaragua","6,08","1000s","2013","1.48%","5,743","5,386","4,046"  ],
        ["Niger","17,831","1000s","2013","3.93%","15,303","12,709","7,52"  ],
        ["Nigeria","173,615","1000s","2013","2.83%","155,381","135,999","93,18"  ],
        ["North Korea","24,895","1000s","2013","0.53%","24,372","23,639","19,895"  ],
        ["Norway","5,084","1000s","2013","1.31%","4,829","4,592","4,227"  ],
        ["Oman","3,632","1000s","2013","9.61%","2,663","2,464","1,743"  ],
        ["Pakistan","182,143","1000s","2013","1.66%","170,094","155,151","107,865"  ],
        ["Panama","3,864","1000s","2013","1.63%","3,616","3,303","2,435"  ],
        ["Papua New Guinea","7,321","1000s","2013","2.15%","6,705","5,948","4,057"  ],
        ["Paraguay","6,802","1000s","2013","1.72%","6,347","5,793","4,139"  ],
        ["Peru","30,376","1000s","2013","1.29%","28,934","27,404","21,326"  ],
        ["Philippines","98,394","1000s","2013","1.74%","91,886","84,231","60,41"  ],
        ["Poland","38,531","1000s","2013","-0.01%","38,152","38,182","37,962"  ],
        ["Portugal","10,46","1000s","2013","-0.52%","10,568","10,484","10,005"  ],
        ["Qatar","2,169","1000s","2013","5.76%","1,564","720","463"  ],
        ["Romania","19,964","1000s","2013","-0.56%","20,367","21,452","23,161"  ],
        ["Russia","143,5","1000s","2013","0.22%","141,909","143,821","147,721"  ],
        ["Rwanda","11,777","1000s","2013","2.78%","10,53","9,254","7,224"  ],
        ["Saint Kitts and Nevis","54","1000s","2013","1.13%","52","48","41"  ],
        ["Saint Lucia","182","1000s","2013","0.78%","175","163","136"  ],
        ["Saint Vincent and the Grenadines","109","1000s","2013","0.00%","109","109","107"  ],
        ["Samoa","190","1000s","2013","0.79%","185","179","162"  ],
        ["San Marino","31","1000s","2013","0.64%","31","29","24"  ],
        ["Sao Tome and Principe","193","1000s","2013","2.60%","173","151","115"  ],
        ["Saudi Arabia","28,829","1000s","2013","1.91%","26,796","23,839","15,665"  ],
        ["Senegal","14,133","1000s","2013","2.97%","12,587","10,968","7,285"  ],
        ["Serbia","7,164","1000s","2013","-0.49%","7,321","7,463","n.a."  ],
        ["Seychelles","89","1000s","2013","0.99%","87","82","69"  ],
        ["Sierra Leone","6,092","1000s","2013","1.90%","5,641","4,928","3,993"  ],
        ["Singapore","5,399","1000s","2013","1.63%","4,988","4,167","2,931"  ],
        ["Slovak Republic","5,414","1000s","2013","0.12%","5,386","5,372","5,276"  ],
        ["Slovenia","2,06","1000s","2013","0.16%","2,04","1,997","1,996"  ],
        ["Solomon Islands","561","1000s","2013","2.12%","515","458","303"  ],
        ["Somalia","10,496","1000s","2013","2.95%","9,381","8,25","6,285"  ],
        ["South Africa","52,982","1000s","2013","1.35%","50,223","47,019","34,491"  ],
        ["South Korea","50,22","1000s","2013","0.43%","49,182","48,039","42,449"  ],
        ["South Sudan","11,296","1000s","2013","4.23%","9,521","7,73","5,775"  ],
        ["Spain","46,647","1000s","2013","-0.24%","46,363","42,922","38,791"  ],
        ["Sri Lanka","20,483","1000s","2013","0.76%","20,45","19,435","16,825"  ],
        ["Sudan","37,964","1000s","2013","2.07%","34,853","30,779","19,295"  ],
        ["Suriname","539","1000s","2013","0.89%","520","493","400"  ],
        ["Swaziland","1,25","1000s","2013","1.51%","1,174","1,095","834"  ],
        ["Sweden","9,593","1000s","2013","0.77%","9,299","8,994","8,493"  ],
        ["Switzerland","8,081","1000s","2013","1.06%","7,744","7,39","6,647"  ],
        ["Syria","22,846","1000s","2013","1.99%","21,032","17,676","12,088"  ],
        ["Tajikistan","8,208","1000s","2013","2.48%","7,447","6,664","5,16"  ],
        ["Tanzania","49,253","1000s","2013","3.08%","43,64","37,765","24,686"  ],
        ["Thailand","67,011","1000s","2013","0.34%","66,277","65,087","55,833"  ],
        ["The Bahamas","377","1000s","2013","1.46%","354","322","252"  ],
        ["Timor-Leste","1,178","1000s","2013","2.55%","1,049","967","730"  ],
        ["Togo","6,817","1000s","2013","2.62%","6,144","5,398","3,685"  ],
        ["Tonga","105","1000s","2013","0.36%","104","100","95"  ],
        ["Trinidad and Tobago","1,341","1000s","2013","0.28%","1,323","1,29","1,214"  ],
        ["Tunisia","10,886","1000s","2013","1.01%","10,44","9,932","7,959"  ],
        ["Turkey","74,933","1000s","2013","1.26%","71,241","66,846","53,066"  ],
        ["Turkmenistan","5,24","1000s","2013","1.30%","4,979","4,697","3,571"  ],
        ["Tuvalu","10","1000s","2013","0.16%","10","10","9"  ],
        ["UAE","9,346","1000s","2013","1.53%","7,718","3,659","1,707"  ],
        ["Uganda","37,579","1000s","2013","3.39%","32,864","27,767","16,923"  ],
        ["UK","64,097","1000s","2013","0.63%","62,276","59,988","57,077"  ],
        ["Ukraine","45,49","1000s","2013","-0.23%","46,053","47,452","51,773"  ],
        ["Uruguay","3,407","1000s","2013","0.35%","3,36","3,324","3,089"  ],
        ["USA","316,129","1000s","2013","0.72%","306,772","292,805","246,819"  ],
        ["Uzbekistan","30,241","1000s","2013","1.57%","27,767","25,864","20,077"  ],
        ["Vanuatu","253","1000s","2013","2.22%","231","204","143"  ],
        ["Venezuela","30,405","1000s","2013","1.50%","28,583","26,261","19,256"  ],
        ["Vietnam","89,709","1000s","2013","1.05%","86,025","81,438","64,774"  ],
        ["Yemen","24,407","1000s","2013","2.33%","22,23","19,613","11,27"  ],
        ["Zambia","14,539","1000s","2013","3.29%","12,825","11,175","7,647"  ],
        ["Zimbabwe","14,15","1000s","2013","3.10%","12,889","12,693","10,167"  ],
        ["Zimbabwe","14,15","1000s","2013","3.10%","12,889","12,693","10,167"  ]
    ];

    var personalData = [
        ["","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC","Total"  ],
        ["Total Income"," $12 926,00 "," $12 926,00 "," $12 926,00 "," $12 926,00 "," $12 926,00 "," $12 926,00 "," $12 926,00 "," $12 926,00 "," $12 926,00 "," $12 926,00 "," $12 926,00 "," $12 926,00 "," $155 112,00 "  ],
        ["Total Expenses"," $10 650,00 "," $10 650,00 "," $10 650,00 "," $10 650,00 "," $10 650,00 "," $10 650,00 "," $10 650,00 "," $10 650,00 "," $10 650,00 "," $10 650,00 "," $10 650,00 "," $10 650,00 "," $127 800,00 "  ],
        ["NET (Income - Expenses)"," $2 276,00 "," $2 276,00 "," $2 276,00 "," $2 276,00 "," $2 276,00 "," $2 276,00 "," $2 276,00 "," $2 276,00 "," $2 276,00 "," $2 276,00 "," $2 276,00 "," $2 276,00 "," $27 312,00 "  ],
        ["","","","","","","","","","","","","",""  ],
        ["Income","","","","","","","","","","","","",""  ],
        ["Salary"," $11 370,00 "," $11 370,00 "," $11 370,00 "," $11 370,00 "," $11 370,00 "," $11 370,00 "," $11 370,00 "," $11 370,00 "," $11 370,00 "," $11 370,00 "," $11 370,00 "," $11 370,00 ",""  ],
        ["Interest income"," $56,00 "," $56,00 "," $56,00 "," $56,00 "," $56,00 "," $56,00 "," $56,00 "," $56,00 "," $56,00 "," $56,00 "," $56,00 "," $56,00 ",""  ],
        ["Public assistance"," $-   "," $-   "," $-   "," $-   "," $-   "," $-   "," $-   "," $-   "," $-   "," $-   "," $-   "," $-   ",""  ],
        ["Dividends"," $-   "," $-   "," $-   "," $-   "," $-   "," $-   "," $-   "," $-   "," $-   "," $-   "," $-   "," $-   ",""  ],
        ["Gifts"," $300,00 "," $300,00 "," $300,00 "," $300,00 "," $300,00 "," $300,00 "," $300,00 "," $300,00 "," $300,00 "," $300,00 "," $300,00 "," $300,00 ",""  ],
        ["Other"," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 ",""  ],
        ["","","","","","","","","","","","","",""  ],
        ["Expenses","","","","","","","","","","","","",""  ],
        ["Living","","","","","","","","","","","","",""  ],
        ["","","","","","","","","","","","","",""  ],
        ["Rent/Mortgage"," $3 200,00 "," $3 200,00 "," $3 200,00 "," $3 200,00 "," $3 200,00 "," $3 200,00 "," $3 200,00 "," $3 200,00 "," $3 200,00 "," $3 200,00 "," $3 200,00 "," $3 200,00 ",""  ],
        ["Electricity"," $160,00 "," $160,00 "," $160,00 "," $160,00 "," $160,00 "," $160,00 "," $160,00 "," $160,00 "," $160,00 "," $160,00 "," $160,00 "," $160,00 ",""  ],
        ["Water/Gas/Sewer"," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 ",""  ],
        ["TV/Internet/Phone"," $50,00 "," $50,00 "," $50,00 "," $50,00 "," $50,00 "," $50,00 "," $50,00 "," $50,00 "," $50,00 "," $50,00 "," $50,00 "," $50,00 ",""  ],
        ["Maintenance"," $260,00 "," $260,00 "," $260,00 "," $260,00 "," $260,00 "," $260,00 "," $260,00 "," $260,00 "," $260,00 "," $260,00 "," $260,00 "," $260,00 ",""  ],
        ["Obligations","","","","","","","","","","","","",""  ],
        ["","","","","","","","","","","","","",""  ],
        ["Loans"," $1 500,00 "," $1 500,00 "," $1 500,00 "," $1 500,00 "," $1 500,00 "," $1 500,00 "," $1 500,00 "," $1 500,00 "," $1 500,00 "," $1 500,00 "," $1 500,00 "," $1 500,00 ",""  ],
        ["Credit cards"," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 ",""  ],
        ["Taxes"," $450,00 "," $450,00 "," $450,00 "," $450,00 "," $450,00 "," $450,00 "," $450,00 "," $450,00 "," $450,00 "," $450,00 "," $450,00 "," $450,00 ",""  ],
        ["Insurance"," $140,00 "," $140,00 "," $140,00 "," $140,00 "," $140,00 "," $140,00 "," $140,00 "," $140,00 "," $140,00 "," $140,00 "," $140,00 "," $140,00 ",""  ],
        ["Daily expenses","","","","","","","","","","","","",""  ],
        ["","","","","","","","","","","","","",""  ],
        ["Food"," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 "," $1 200,00 ",""  ],
        ["Clothing"," $350,00 "," $350,00 "," $350,00 "," $350,00 "," $350,00 "," $350,00 "," $350,00 "," $350,00 "," $350,00 "," $350,00 "," $350,00 "," $350,00 ",""  ],
        ["Personal supplies"," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 "," $120,00 ",""  ],
        ["Health care"," $320,00 "," $320,00 "," $320,00 "," $320,00 "," $320,00 "," $320,00 "," $320,00 "," $320,00 "," $320,00 "," $320,00 "," $320,00 "," $320,00 ",""  ],
        ["Education"," $540,00 "," $540,00 "," $540,00 "," $540,00 "," $540,00 "," $540,00 "," $540,00 "," $540,00 "," $540,00 "," $540,00 "," $540,00 "," $540,00 ",""  ],
        ["Entertainment"," $210,00 "," $210,00 "," $210,00 "," $210,00 "," $210,00 "," $210,00 "," $210,00 "," $210,00 "," $210,00 "," $210,00 "," $210,00 "," $210,00 ",""  ],
        ["Transportation"," $220,00 "," $220,00 "," $220,00 "," $220,00 "," $220,00 "," $220,00 "," $220,00 "," $220,00 "," $220,00 "," $220,00 "," $220,00 "," $220,00 ",""  ],
        ["Other","","","","","","","","","","","","",""  ],
        ["","","","","","","","","","","","","",""  ],
        ["Donations"," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 "," $80,00 ",""  ],
        ["Savings"," $500,00 "," $500,00 "," $500,00 "," $500,00 "," $500,00 "," $500,00 "," $500,00 "," $500,00 "," $500,00 "," $500,00 "," $500,00 "," $500,00 ",""  ],
        ["Gifts"," $200,00 "," $200,00 "," $200,00 "," $200,00 "," $200,00 "," $200,00 "," $200,00 "," $200,00 "," $200,00 "," $200,00 "," $200,00 "," $200,00 ",""  ],
        ["Retirement"," $800,00 "," $800,00 "," $800,00 "," $800,00 "," $800,00 "," $800,00 "," $800,00 "," $800,00 "," $800,00 "," $800,00 "," $800,00 "," $800,00 ",""  ],
        ["Other"," $150,00 "," $150,00 "," $150,00 "," $150,00 "," $150,00 "," $150,00 "," $150,00 "," $150,00 "," $150,00 "," $150,00 "," $150,00 "," $150,00 ",""  ]
    ];

    var financeData = [
        ["239.65","24-Feb-2015","1.28%","-23.79%","47,044",""  ],
        ["238.99","24-Feb-2015","1.06%","-24.35%","5,11",""  ],
        ["231.26","24-Feb-2015","0.66%","-25.21%","7,571",""  ],
        ["239.12","24-Feb-2015","0.82%","-24.54%","16,429",""  ],
        ["255.07","24-Feb-2015","0.91%","-20.17%","252",""  ],
        ["238.91","24-Feb-2015","0.77%","-24.37%","995",""  ],
        ["211.51","24-Feb-2015","0.89%","-18.80%","4,28",""  ],
        ["210.65","24-Feb-2015","0.78%","-19.30%","2,521",""  ],
        ["205.06","24-Feb-2015","1.07%","-22.51%","96",""  ],
        ["212.41","24-Feb-2015","0.85%","-19.49%","456",""  ],
        ["227.94","24-Feb-2015","1.58%","-13.63%","49",""  ],
        ["211.28","24-Feb-2015","0.78%","-17.65%","19",""  ],
        ["1,486.97","24-Feb-2015","1.12%","-23.10%","168",""  ],
        ["1,310.00","24-Feb-2015","-18.12%","-33.10%","0",""  ],
        ["1,497.50","24-Feb-2015","0.51%","-23.09%","160",""  ]
    ];

    var scienceData = [
        [0.0008686210640608003,18.235294117647058,0.0015472312703583065,18.235294117647058,""  ],
        [0.0013436482084690554,18.96551724137931,0.002219055374592834,18.843813387423936,""  ],
        [0.0019408251900108608,19.69574036511156,0.0031867535287730727,19.391480730223122,""  ],
        [0.0025651465798045606,20.425963488843813,0.004153094462540717,20.073022312373226,""  ],
        [0.0034337676438653607,21.03448275862069,0.004987785016286645,20.669371196754565,""  ],
        [0.004352153456387986,21.460446247464503,0.006317861020629753,21.399594320486816,""  ],
        [0.00521172638436482,21.82555780933063,0.0069625407166123785,21.764705882352942,""  ],
        [0.006152732537097358,22.190669371196755,0.008170466883821935,22.251521298174442,""  ],
        [0.007229460731089401,22.55578093306288,0.008794788273615637,22.616632860040568,""  ],
        [0.008387622149837135,22.920892494929006,0.010173724212812157,22.920892494929006,""  ],
        [0.009373868982989511,23.28600405679513,0.010749185667752443,23.164300202839755,""  ],
        [0.01029677886355411,23.651115618661258,0.012061165399927623,23.529411764705884,""  ],
        [0.011156351791530943,24.016227180527384,0.012703583061889253,23.772819472616632,""  ],
        [0.012228555917481,24.381338742393506,0.014026872964169382,24.04665314401623,""  ],
        [0.01296145494028231,24.685598377281945,0.014712269272529858,24.259634888438136,""  ],
        [0.014060803474484256,24.989858012170387,0.01604234527687297,24.527383367139958,""  ],
        [0.015228013029315961,25.35496957403651,0.01685667752442997,24.746450304259632,""  ],
        [0.016270358306188927,25.65922920892495,0.018159609120521177,25.020283975659225,""  ],
        [0.01738599348534202,25.963488843813387,0.01881107491856678,25.233265720081135,""  ],
        [0.018611563517915312,26.3894523326572,0.020199511400651467,25.50709939148073,""  ],
        [0.01980456026058632,26.69371196754564,0.02092833876221498,25.72008113590264,""  ],
        [0.020863192182410423,26.937119675456387,0.022190553745928338,26.024340770791074,""  ],
        [0.022339847991313787,27.302231237322516,0.022923452768729643,26.3894523326572,""  ],
        [0.023452768729641693,27.72819472616633,0.02438925081433225,26.754563894523326,""  ],
        [0.024267100977198697,27.91075050709939,0.025868621064060807,27.18052738336714,""  ],
        [0.0254343105320304,28.154158215010142,0.026673905175533846,27.545638945233264,""  ],
        [0.026302931596091206,28.45841784989858,0.02776872964169381,27.789046653144013,""  ],
        [0.027280130293159614,28.76267748478702,0.028574918566775243,27.971602434077077,""  ],
        [0.028338762214983715,29.12778904665314,0.03022801302931596,28.3367139959432,""  ],
        [0.02915309446254072,29.43204868154158,0.03102605863192183,28.640973630831645,""  ],
        [0.030103148751357223,29.73630831643002,0.03213219326818676,28.945233265720077,""  ],
        [0.031351791530944625,30.162271805273832,0.03285830618892508,29.310344827586206,""  ],
        [0.03264169381107492,30.563894523326567,0.03405266015200869,29.675456389452336,""  ],
        [0.033819218241042344,30.831643002028393,0.03517915309446254,30.162271805273832,""  ],
        [0.03510314875135723,31.075050709939145,0.0362785016286645,30.649087221095332,""  ],
        [0.0362785016286645,31.50101419878296,0.037595005428881646,31.379310344827587,""  ],
        [0.037377850162866454,31.74442190669371,0.03866449511400652,32.14604462474645,""  ],
        [0.03853691639522258,32.04868154158215,0.03952768729641694,32.7789046653144,""  ],
        [0.0396742671009772,32.535496957403645,0.04090662323561346,33.32657200811359,""  ],
        [0.04063517915309446,33.08316430020284,0.04201954397394137,33.935091277890464,""  ],
        [0.04175488599348534,33.75253549695741,0.0430985342019544,34.42190669371197,""  ],
        [0.042345276872964174,34.36105476673428,0.04424538545059718,35.030425963488845,""  ],
        [0.04367535287730728,34.908722109533464,0.04480456026058634,35.74847870182555,""  ],
        [0.04432681867535289,35.51724137931035,0.04489685124864278,36.49087221095334,""  ],
        [0.044869706840390884,36.21703853955374,0.0445928338762215,37.18458417849898,""  ],
        [0.04497828447339849,36.977687626774845,0.04391965255157438,37.76876267748479,""  ],
        [0.04491042345276873,37.7079107505071,0.04318675352877307,38.073022312373226,""  ],
        [0.04453040173724213,38.43813387423935,0.042064784654361205,38.681541582150096,""  ],
        [0.04413680781758958,39.04665314401622,0.04071661237785017,39.22920892494928,""  ],
        [0.04325913861744481,39.65517241379311,0.03971226927252986,39.59432048681541,""  ],
        [0.042691368078175904,40.26369168356999,0.03815146579804561,40.081135902636916,""  ],
        [0.041564875135722046,40.750507099391484,0.03754071661237785,40.324543610547664,""  ],
        [0.040640608034744855,41.17647058823529,0.036074918566775256,40.56795131845842,""  ],
        [0.039603691639522265,41.54158215010142,0.03550488599348534,40.811359026369175,""  ],
        [0.03845457835685849,41.90669371196754,0.034229098805646035,41.05476673427992,""  ],
        [0.03749547593195802,42.271805273833664,0.033469055374592833,41.23732251521298,""  ],
        [0.03653637350705755,42.63691683569979,0.03219326818675353,41.54158215010142,""  ],
        [0.03528094462540717,43.00202839756592,0.031541802388707935,41.78498985801217,""  ],
        [0.03392508143322477,43.294117647058826,0.030266015200868624,42.1501014198783,""  ],
        [0.03285830618892509,43.793103448275865,0.02953311617806732,42.454361054766736,""  ],
        [0.031939920376402475,44.21906693711968,0.02833876221498372,42.880324543610556,""  ],
        [0.031202497285559173,44.523326572008116,0.027687296416938116,43.1237322515213,""  ],
        [0.03018458197611293,44.888438133874246,0.02635179153094463,43.537525354969574,""  ],
        [0.029207383279044517,45.31440162271805,0.025570032573289908,44.2920892494929,""  ],
        [0.028019815418023886,45.740365111561864,0.024723127035830628,44.94929006085192,""  ],
        [0.02687296416938111,46.22718052738337,0.02348534201954397,45.801217038539555,""  ],
        [0.025848262757871887,46.713995943204864,0.022638436482084696,46.470588235294116,""  ],
        [0.02484618168657256,47.139959432048684,0.021864820846905535,47.20081135902637,""  ],
        [0.02397394136807818,47.62677484787018,0.021186210640608032,48.29614604462475,""  ],
        [0.023127035830618894,48.17444219066937,0.020385450597176984,48.884381338742386,""  ],
        [0.022090119435396308,48.722109533468554,0.01935396308360478,49.39148073022312,""  ],
        [0.021208830980817946,49.208924949290065,0.018892508143322474,49.69574036511156,""  ],
        [0.02010722041259501,49.63488843813387,0.017695439739413687,50.182555780933065,""  ],
        [0.018914223669923996,50.06085192697769,0.016775244299674273,50.66937119675457,""  ],
        [0.01782844733984799,50.42596348884381,0.015662323561346364,51.217038539553755,""  ],
        [0.016924538545059722,50.851926977687626,0.014766558089033658,51.76470588235294,""  ],
        [0.016069489685124862,51.27789046653144,0.014026872964169382,52.2210953346856,""  ],
        [0.014854777415852324,51.70385395537525,0.01319218241042345,52.73833671399595,""  ],
        [0.013802931596091209,52.06896551724138,0.0126900108577633,53.40770791075052,""  ],
        [0.012866449511400656,52.4340770791075,0.011543159609120526,54.259634888438136,""  ],
        [0.011909609120521171,52.92089249492901,0.010830618892508146,54.62474645030425,""  ],
        [0.010939196525515747,53.40770791075051,0.009636264929424545,55.233265720081135,""  ],
        [0.009853420195439734,54.01622718052738,0.008631921824104228,55.841784989858006,""  ],
        [0.008794788273615635,54.74645030425964,0.007980456026058637,56.57200811359027,""  ],
        [0.008102605863192176,55.476673427991884,0.007471498371335507,57.3630831643002,""  ],
        [0.007247557003257327,56.206896551724135,0.0068675352877307265,57.97160243407708,""  ],
        [0.006824104234527677,56.8762677484787,0.005822475570032569,59.00608519269776,""  ],
        [0.006487513572204123,57.66734279918864,0.005028501628664499,59.73630831643002,""  ],
        [0.00635179153094463,58.39756592292089,0.004424538545059723,60.46653144016227,""  ],
        [0.006039630836047772,59.12778904665315,0.00386807817589576,61.25760649087221,""  ],
        [0.005646036916395228,59.85801217038539,0.0036807817589576634,61.86612576064908,""  ],
        [0.005266015200868617,60.58823529411764,0.003583061889250809,62.657200811359026,""  ],
        [0.004869706840390869,61.28194726166329,0.0035152008686210575,63.38742393509127,""  ],
        [0.004356677524429961,62.04868154158215,0.0034201954397394163,63.87423935091278,""  ],
        [0.003778501628664497,62.718052738336716,0.0030537459283387597,64.84787018255577,""  ],
        [0.0030673181324647083,63.50912778904665,0.0030401737242128205,65.39553752535497,""  ],
        [0.002671009771986973,64.27586206896551,0.0027823018458197645,66.30831643002028,""  ],
        [0.002497285559174807,64.96957403651115,0.002605863192182404,66.91683569979716,""  ],
        [0.002263843648208466,65.63894523326572,0.0023615635179153054,67.89046653144015,""  ],
        [0.001940825190010856,66.43002028397567,0.0022801302931596138,68.49898580121703,""  ],
        [0.001872964169381108,67.16024340770792,0.002212269272529848,69.47261663286005,""  ],
        [0.0017915309446254028,67.89046653144015,0.0021986970684039126,70.08113590263692,""  ],
        [0.0017263843648208464,68.55983772819474,0.0019951140065146587,71.05476673427991,""  ],
        [0.0015472312703583106,69.5943204868154,0.0018526058631921807,71.6632860040568,""  ],
        [0.0014522258414766567,70.32454361054766,0.0017589576547231214,72.57606490872212,""  ],
        [0.001180781758957652,71.05476673427992,0.0015472312703582996,73.30628803245436,""  ],
        [0.000950054288816508,71.78498985801217,0.0014250814332247598,74.0973630831643,""  ],
        [0.000665038002171552,72.51521298174443,null,null,""  ],
        [0.0005157437567861012,73.24543610547667,null,null,""  ],
        [0.0004275244299674336,73.85395537525355,null,null,""  ]
    ];

    var dataSport = [
        ["1","Los Angeles Lakers","<img src='#{data.baseUrl}images/logos/nba-teams/lakers.gif' />","2 600","93","2","293","104,1"  ],
        ["2","New York Knicks","<img src='#{data.baseUrl}images/logos/nba-teams/knicks.gif' />","2 500","79","0","278","53,4"  ],
        ["3","Chicago Bulls","<img src='#{data.baseUrl}images/logos/nba-teams/bulls.gif' />","2 000","100","3","201","65,3"  ],
        ["4","Boston Celtics","<img src='#{data.baseUrl}images/logos/nba-teams/celtic.gif' />","1 700","94","9","173","54,9"  ],
        ["5","Los Angeles Clippers","<img src='#{data.baseUrl}images/logos/nba-teams/clippers.gif' />","1 600","178","0","146","20,1"  ],
        ["6","Brooklyn Nets","<img src='#{data.baseUrl}images/logos/nba-teams/nets.gif' />","1 500","92","19","212","-99,4"  ],
        ["7","Golden State Warriors","<img src='#{data.baseUrl}images/logos/nba-teams/warriors.gif' />","1 300","73","12","168","44,9"  ],
        ["8","Houston Rockets","<img src='#{data.baseUrl}images/logos/nba-teams/rockets.gif' />","1 250","61","8","175","38"  ],
        ["9","Miami Heat","<img src='#{data.baseUrl}images/logos/nba-teams/heat.gif' />","1 175","53","8","188","12,6"  ],
        ["10","Dallas Mavericks","<img src='#{data.baseUrl}images/logos/nba-teams/mavericks.gif' />","1 150","50","17","168","30,4"  ],
        ["11","San Antonio Spurs","<img src='#{data.baseUrl}images/logos/nba-teams/spurs.gif' />","1 000","52","8","172","40,9"  ],
        ["12","Portland Trail Blazers","<img src='#{data.baseUrl}images/logos/nba-teams/blazers.gif' />","940","60","11","153","11,7"  ],
        ["13","Oklahoma City Thunder","<img src='#{data.baseUrl}images/logos/nba-teams/thunder.gif' />","930","58","15","152","30,8"  ],
        ["14","Toronto Raptors","<img src='#{data.baseUrl}images/logos/nba-teams/raptors.gif' />","920","77","16","151","17,9"  ],
        ["15","Cleveland Cavaliers","<img src='#{data.baseUrl}images/logos/nba-teams/cavaliers.gif' />","915","78","22","149","20,6"  ],
        ["16","Phoenix Suns","<img src='#{data.baseUrl}images/logos/nba-teams/suns.gif' />","910","61","20","145","28,2"  ],
        ["17","Washington Wizards","<img src='#{data.baseUrl}images/logos/nba-teams/wizards.gif' />","900","86","14","143","10,1"  ],
        ["18","Orlando Magic","<img src='#{data.baseUrl}images/logos/nba-teams/magic.gif' />","875","56","17","143","20,9"  ],
        ["19","Denver Nuggets","<img src='#{data.baseUrl}images/logos/nba-teams/nuggets.gif' />","855","73","1","136","14"  ],
        ["20","Utah Jazz","<img src='#{data.baseUrl}images/logos/nba-teams/jazz.gif' />","850","62","6","142","32,7"  ],
        ["21","Indiana Pacers","<img src='#{data.baseUrl}images/logos/nba-teams/pacers.gif' />","830","75","18","139","25"  ],
        ["22","Atlanta Hawks","<img src='#{data.baseUrl}images/logos/nba-teams/hawks.gif' />","825","94","21","133","14,8"  ],
        ["23","Detroit Pistons","<img src='#{data.baseUrl}images/logos/nba-teams/pistons.gif' />","810","80","23","144","17,6"  ],
        ["24","Sacramento Kings","<img src='#{data.baseUrl}images/logos/nba-teams/kings.gif' />","800","45","29","125","8,9"  ],
        ["25","Memphis Grizzlies","<img src='#{data.baseUrl}images/logos/nba-teams/memphis.gif' />","750","66","23","135","10,5"  ],
        ["26","Charlotte Hornets","<img src='#{data.baseUrl}images/logos/nba-teams/hornets.gif' />","725","77","21","130","1,2"  ],
        ["27","Philadelphia 76ers","<img src='#{data.baseUrl}images/logos/nba-teams/76ers.gif' />","700","49","21","125","24,4"  ],
        ["28","New Orleans Pelicans","<img src='#{data.baseUrl}images/logos/nba-teams/orleans.gif' />","650","55","19","131","19"  ],
        ["29","Minnesota Timberwolves","<img src='#{data.baseUrl}images/logos/nba-teams/timberwolves.gif' />","625","45","16","128","6,9"  ],
        ["30","Milwaukee Bucks","<img src='#{data.baseUrl}images/logos/nba-teams/bucks.gif' />","600","48","29","110","11,5"  ],
    ];

  me.demos = {
    hotSettings: {
      'examples': {
        settings: {
            width: 900,
            colHeaders: true,
            rowHeaders: true,
            stretchH: 'all',
            columnSorting: true,
            contextMenu: true
        },
        getData: function () {
          return Handsontable.helper.createSpreadsheetData(40, 12);
        }
      },
      'advanced': {
        settings: {
            width: 900,
            height: 511,
            colHeaders: ["Country","Level","Units","As Of","1Y Chg","5Y Ago","10Y Ago","25Y Ago"],
            rowHeaders: true,
            stretchH: 'all',
            manualColumnResize: true,
            manualRowResize: true,
            columnSorting: true,
            contextMenu: true,
            className: "htCenter"
// bug w handsontable - nie przyjmuje dwóch klas
//            renderer: function(instance, td) {
//                td.className += ' htCenter htMiddle';
//            }
        },
        getData: function () {
          return advancedData;
        }
      },
      'personal': {
        settings: {
            width: 900,
            height: 400,
            colHeaders: true,
            rowHeaders: true,
            stretchH: 'all',
            manualColumnResize: true,
            manualRowResize: true,
            columnSorting: true,
            contextMenu: true
        },
        getData: function () {
          return personalData;
        }
      },
      'finance': {
        settings: {
            width: 900,
            colHeaders: ["Price","Date","1D Chg","YTD Chg","Vol BTC","Price chart"],
            rowHeaders: true,
            stretchH: 'all',
            manualColumnResize: true,
            manualRowResize: true,
            columnSorting: true,
            contextMenu: true
        },
        getData: function () {
          return financeData;
        }
      },
      'science': {
        settings: {
            width: 900,
            colHeaders: ["Frequency","Average age","Frequency","Average age","Line chart"],
            rowHeaders: true,
            stretchH: 'all',
            manualColumnResize: true,
            manualRowResize: true,
            columnSorting: true,
            contextMenu: true
        },
        getData: function () {
          return scienceData;
        }
      },
      'sport': {
        settings: {
          width: 900,
          colHeaders: ["Rank","Team","Logo","Current Value ($mil)","1-Yr Value Change (%)","Debt/Value (%)","Revenue ($mil)","Operating Income ($mil)"  ],
          rowHeaders: false,
          stretchH: 'all',
          manualColumnResize: true,
          manualRowResize: true,
          columnSorting: true,
          contextMenu: true
        },
        getData: function () {
          return dataSport;
        }
      }
    },
    index: function () {
      var container = document.getElementById('intro');

      if (!container) {
        return;
      }

      hotInstances['index'] = new Handsontable(container, {
        data: Handsontable.helper.createSpreadsheetData(12, 7),
        width: 500,
        height: 304,
        colHeaders: true,
        rowHeaders: true,
        stretchH: 'all'
      });

      Handsontable.Dom.addEvent(document.querySelector('#load-data'), 'click', function () {
        HT.scrollSmooth('header', function () {
          var data = Handsontable.helper.createSpreadsheetData(10000, 7);
          hotInstances['index'].loadData(data);

          hotInstances['index'].addHookOnce('afterLoadData', function () {
            setTimeout(function () {
              // scroll animation -> make better performance
              //$('.handsontable').animate({
              //  scrollTop: $('.handsontable')[0].scrollHeight,
              //  easing: 'easeOutQuint'
              //}, 25000, function () {
              //  hotInstances['index'].selectCell(9999, 0);
              //});

              hotInstances['index'].selectCell(9999, 0);
            }, 500);

          });
        });
      });
    },
    examples: function () {
      var container = document.getElementById('examples');

      if (!container) {
        return;
      }

      hotInstances['examples'] = new Handsontable(container, me.demos.hotSettings['examples'].settings);
      hotInstances['examples'].loadData(me.demos.hotSettings['examples'].getData());
    },
    render: function () {
      me.demos.index();
      me.demos.examples();
    }
  };

  me.tabs = function () {
    var tabs = $('.tabs');

    $(document).foundation({
      tab: {
        // there is a bug in foundation framework (doubled events fired after clicked tabs)
        callback: function (tab) {
          var children = tabs.children('dd[name!=' + tab.attr('name') + ']');

          children.each(function () {
            $(this).removeAttr('fired');
          });

          if (tab.hasClass('active') && !tab.attr('fired')) {
            tab.attr('fired', true);
            var htInstanceSettings = me.demos.hotSettings[tab.attr('name').toLowerCase()];

            if (htInstanceSettings) {
                hotInstances['examples'].rootElement.setAttribute('id', tab.attr('name').toLowerCase());
              hotInstances['examples'].updateSettings(htInstanceSettings.settings);
              hotInstances['examples'].loadData(htInstanceSettings.getData());
            }
          }
        }
      }
    })
  };

  me.scrollSmooth = function (target, fnCallback) {
    target = $(target);
    fnCallback = fnCallback || function () {};

    if (target) {
      $('html, body').animate({
        scrollTop: target.offset().top
      }, 1000, fnCallback);

      return false;
    }
  };

  me.highlightCode = function () {
    $('.step[rel]').each(function () {
      var $this = $(this),
          rel = $this.attr('rel');

      $this.hover(function () {
        $('.' + rel).addClass('active');
      }, function () {
        $('.' + rel).removeClass('active');
      });

    });
  };

  me.navigation = function () {
    var $navBar = $('nav');

    $('.menu').on(hitEvent, function () {
      $navBar.toggleClass('nav-show');
    });

    $('.content').on(hitEvent, function(event) {
      if ($navBar.hasClass('nav-show')) {
        $navBar.removeClass('nav-show');
      }
    });
  };

  me.init = function () {
    hitEvent = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click';

    me.navigation();
    me.tabs();

    me.demos.render();
    me.highlightCode();
  };

  return me;
}());

$(function() {
  HT.init();
});
